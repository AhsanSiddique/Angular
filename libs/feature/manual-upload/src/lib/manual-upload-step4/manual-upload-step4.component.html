<div class="bulk-registration">
  <div class="page-title w-100">
    <div class="d-flex w-100">
      <h4 class="w-100 mb-0">
        {{ 'ManualStep4.ManualRegistrationBulkImport' | translate }}
      </h4>
    </div>
    <div>
      <button class="btn btn-dark btn-export" style="width: 100px">
        <i class="export-ico"></i>{{ 'ManualStep4.Export' | translate }}
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="registration-details">
        <div class="fan-card" *ngIf="importeddata">
            <!-- <table
              datatable
              [dtOptions]="dtOptions"
              [dtTrigger]="dtTrigger"
              id="failedrecords"
              class="row-border fan-id-datatable"
            >
              <thead>
                <tr>
                  <th style="width: 5% !important">
                    <div class="roundcheck">
                      <input
                        type="checkbox"
                        id="checkAll"
                        #checkAllmem
                        (change)="checkAll($event)"
                      />
                      <label for="checkAll"></label>
                    </div>
                  </th>
                  <th>{{ 'ManualStep3.Action' | translate }}</th>
                  <th>{{ 'ManualStep3.ImportStatus' | translate }}</th>
                  <th>{{ 'ManualStep3.FirstName' | translate }}</th>
                  <th>{{ 'ManualStep3.LastName' | translate }}</th>
                  <th>{{ 'ManualStep3.ProfilePicture' | translate }}</th>
                  <th>{{ 'ManualStep3.DocumentType' | translate }}</th>
                  <th>{{ 'ManualStep3.QID/PassportPhoto' | translate }}</th>
                  <th>{{ 'ManualStep3.ExpiryDate' | translate }}</th>
                  <th>{{ 'ManualStep3.EmailAddress' | translate }}</th>
                  <th>{{ 'ManualStep3.CountryCode' | translate }}</th>
                  <th>{{ 'ManualStep3.MobileNumber' | translate }}</th>
                  <th>{{ 'ManualStep3.Gender' | translate }}</th>
                </tr>
              </thead>
              <thead class="filterArea">
                <tr>
                  <th></th>
                  <th></th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-uploadstatus"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-fisrtName"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-lastname"
                      />
                    </div>
                  </th>
                  <th></th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-idtype"
                      />
                    </div>
                  </th>
                  <th></th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-expirydate"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-email"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-countrycode"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-contactno"
                      />
                    </div>
                  </th>
                  <th>
                    <div class="filterList">
                      <input
                        type="text"
                        style="width: 100%"
                        placeholder="{{ 'ManualStep3.Search' | translate }}"
                        name="search-gender"
                      />
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="loading" style="height: 150px;">
                  <td colspan="100" style="text-align: center; vertical-align: middle;">Loading...</td>
                </tr>
                <tr *ngFor="let data of importeddata">
                  <td>
                    <div class="roundcheck">
                      <input
                        type="checkbox"
                        [attr.id]="data?.id"
                        (change)="selectMember(data?.id, $event)"
                        #checkboxes
                      />
                      <label [attr.for]="data?.id"></label>
                    </div>
                  </td>
                  <td>
                    <div class="dropdown">
                      <button
                        class="btn btn-secondary dropdown-toggle"
                        type="button"
                        id="dropdownMenuButton"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        {{ 'ManualStep3.Action' | translate }}
                      </button>
                      <div
                        class="dropdown-menu"
                        aria-labelledby="dropdownMenuButton"
                      >
                        <a
                          class="dropdown-item row-edit-ico"
                          href="javascript:void(0)"
                          >{{ 'ManualStep3.Edit' | translate }}</a
                        >
                        <a
                          class="dropdown-item row-delete-ico"
                          href="javascript:void(0)"
                          >{{ 'ManualStep3.Delete' | translate }}</a
                        >
                      </div>
                    </div>
                  </td>
                  <td>
                    <span
                      class="status-tag status-failed"
                      >{{ 'Failed' }}</span
                    >
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'firstname'
                        }"
                        ><i class="error-ico"></i>{{ data?.firstname }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.firstName }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'lastname'
                        }"
                        ><i class="error-ico"></i>{{ data?.lastname }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.lastName }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <div class="text-center">
                      <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                        ><span
                          class="imported-data"
                          *ngFor="let error of data?.errorlist"
                          [attr.data-message]="error.errormessage"
                          [ngClass]="{
                            haserror: error.haserrorin === 'profilepic'
                          }"
                          ><i class="error-ico"></i
                          ><img
                            [src]="data?.profilepic"
                            class="dataas-img profile-pic"
                        /></span>
                      </ng-container>
                      <ng-container *ngIf="data?.uploadstatus === 'Success'"
                        ><span class="imported-data"
                          ><img
                            [src]="data?.profilePic"
                            class="dataas-img profile-pic"
                            alt="profile image"
                        /></span>
                      </ng-container>
                    </div>
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{ haserror: error.haserrorin === 'idtype' }"
                        ><i class="error-ico"></i>{{ data?.idtype }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.docType_Name }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <div class="text-center">
                      <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                        ><span
                          class="imported-data"
                          *ngFor="let error of data?.errorlist"
                          [attr.data-message]="error.errormessage"
                          [ngClass]="{
                            haserror: error.haserrorin === 'document'
                          }"
                          ><i class="error-ico"></i
                          ><img
                            [src]="data?.document"
                            class="dataas-img docment"
                        /></span>
                      </ng-container>
                      <ng-container *ngIf="data?.uploadstatus === 'Success'"
                        ><span class="imported-data"
                          ><img
                            [src]="data?.docImageFront"
                            class="dataas-img docment"
                            alt="document image"
                        /></span>
                      </ng-container>
                    </div>
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'expirydate'
                        }"
                        ><i class="error-ico"></i>{{ data?.expirydate }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data text-center">{{
                        data?.docExpiryDate | dateformatpipe
                      }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{ haserror: error.haserrorin === 'email' }"
                        ><i class="error-ico"></i>{{ data?.email }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.email }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <span [attr.class]="'tel' + data?.phoneAreaCode"
                      >+ {{ data?.phoneAreaCode }}</span
                    >
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'contactno'
                        }"
                        ><i class="error-ico"></i>{{ data?.contactno }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.phone }}</span>
                    </ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{ haserror: error.haserrorin === 'gender' }"
                        ><i class="error-ico"></i>{{ data?.gender }}</span
                      >
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data">{{ data?.gender_Name }}</span>
                    </ng-container>
                  </td>
                </tr>
              </tbody>
            </table> -->
            <div class="table-responsive">
              <table
            datatable
            [dtOptions]="dtOptions"
            [dtTrigger]="dtTrigger"
            id="failedrecords"
            class="row-border fan-id-datatable"
          >
            <thead>
              <tr>
                <th style="width: 5% !important">
                  <div class="roundcheck">
                    <input
                      type="checkbox"
                      id="checkAll"
                      #checkAllmem
                      (change)="checkAll($event)"
                    />
                    <label for="checkAll"></label>
                  </div>
                </th>
                <th>{{ 'ManualStep4.Action' | translate }}</th>
                <th>{{ 'ManualStep4.ImportStatus' | translate }}</th>
                <th>{{ 'ManualStep4.FirstName' | translate }}</th>
                <th>{{ 'ManualStep4.LastName' | translate }}</th>
                <th>{{ 'ManualStep4.ProfilePicture' | translate }}</th>
                <th>{{ 'ManualStep4.DocumentType' | translate }}</th>
                <th>{{ 'ManualStep4.QID/PassportPhoto' | translate }}</th>
                <th>{{ 'ManualStep4.ExpiryDate' | translate }}</th>
                <th>{{ 'ManualStep4.EmailAddress' | translate }}</th>
                <th>{{ 'ManualStep4.CountryCode' | translate }}</th>
                <th>{{ 'ManualStep4.MobileNumber' | translate }}</th>
                <th>{{ 'ManualStep4.Gender' | translate }}</th>
              </tr>
            </thead>
            <thead class="filterArea">
              <tr>
                <th></th>
                <th></th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-uploadstatus"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-fisrtName"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-lastname"
                    />
                  </div>
                </th>
                <th></th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-idtype"
                    />
                  </div>
                </th>
                <th></th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-expirydate"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-email"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-countrycode"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-contactno"
                    />
                  </div>
                </th>
                <th>
                  <div class="filterList">
                    <input
                      type="text"
                      style="width: 100%"
                      placeholder="{{ 'ManualStep4.Search' | translate }}"
                      name="search-gender"
                    />
                  </div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of importeddata">
                <td>
                  <div class="roundcheck">
                    <input
                      type="checkbox"
                      [attr.id]="data?.id"
                      (change)="selectMember(data?.id, $event)"
                      #checkboxes
                    />
                    <label [attr.for]="data?.id"></label>
                  </div>
                </td>
                <td>
                  <div class="dropdown">
                    <button
                      class="btn btn-secondary dropdown-toggle"
                      type="button"
                      id="dropdownMenuButton"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      {{ 'ManualStep4.Action' | translate }}
                    </button>
                    <div
                      class="dropdown-menu"
                      aria-labelledby="dropdownMenuButton"
                    >
                      <a
                        class="dropdown-item row-edit-ico"
                        href="javascript:void(0)"
                        >{{ 'ManualStep4.Edit' | translate }}</a
                      >
                      <a
                        class="dropdown-item row-delete-ico"
                        href="javascript:void(0)"
                        >{{ 'ManualStep4.Delete' | translate }}</a
                      >
                    </div>
                  </div>
                </td>
                <td>
                  <span
                    class="status-tag status-failed"

                    >{{ 'Failed' }}</span
                  >
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'firstname' }"
                      ><i class="error-ico"></i>{{ data?.firstName }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.firstName }}</span>
                  </ng-container>
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'lastname' }"
                      ><i class="error-ico"></i>{{ data?.lastName }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.lastName }}</span>
                  </ng-container>
                </td>
                <td>
                  <div class="text-center">
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'profilepic'
                        }"
                        ><i class="error-ico"></i
                        ><img
                          [src]="data?.profilePic"
                          class="dataas-img profile-pic"
                      /></span>
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data"
                        ><img
                          [src]="data?.profilePic"
                          class="dataas-img profile-pic"
                          alt="profile image"
                      /></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'idtype' }"
                      ><i class="error-ico"></i>{{ data?.docType_Name }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.docType_Name }}</span>
                  </ng-container>
                </td>
                <td>
                  <div class="text-center">
                    <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                      ><span
                        class="imported-data"
                        *ngFor="let error of data?.errorlist"
                        [attr.data-message]="error.errormessage"
                        [ngClass]="{
                          haserror: error.haserrorin === 'document'
                        }"
                        ><i class="error-ico"></i
                        ><img [src]="data?.docImageFront" alt="document image" class="dataas-img docment"
                      /></span>
                    </ng-container>
                    <ng-container *ngIf="data?.uploadstatus === 'Success'"
                      ><span class="imported-data"
                        ><img [src]="data?.docImageFront" alt="document image" class="dataas-img docment"
                      /></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{
                        haserror: error.haserrorin === 'expirydate'
                      }"
                      ><i class="error-ico"></i>{{ data?.docExpiryDate }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.docExpiryDate | dateformatpipe }}</span>
                  </ng-container>
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'email' }"
                      ><i class="error-ico"></i>{{ data?.email }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.email }}</span>
                  </ng-container>
                </td>
                <td>
                  <span [attr.class]="'tel' + data?.phoneAreaCode"
                    >+ {{ data?.phoneAreaCode }}</span
                  >
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'contactno' }"
                      ><i class="error-ico"></i>{{ data?.phone }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.phone }}</span>
                  </ng-container>
                </td>
                <td>
                  <ng-container *ngIf="data?.uploadstatus === 'Failed'"
                    ><span
                      class="imported-data"
                      *ngFor="let error of data?.errorlist"
                      [attr.data-message]="error.errormessage"
                      [ngClass]="{ haserror: error.haserrorin === 'gender' }"
                      ><i class="error-ico"></i>{{ data?.gender }}</span
                    >
                  </ng-container>
                  <ng-container *ngIf="data?.uploadstatus === 'Success'"
                    ><span class="imported-data">{{ data?.gender_Name }}</span>
                  </ng-container>
                </td>
              </tr>
            </tbody>
          </table>
            </div>

          <div class="fan-card-footer tableBtn-foot">
            <div class="d-flex">
              <div class="w-100">
                <button
                  type="submit"
                  class="btn btn-dark btn-sm min-w-150p w-auto"
                  [disabled]="importListTemp.length === 0"
                >
                  <i class="delete-btn-ico"></i>
                  {{ 'ManualStep4.DeleteSelectedItems' | translate }}
                </button>
              </div>
              <div class="w-100 submitbtnPane">
                <a
                  (click)="show_cancel_modal = true"
                  class="btn btn-sm btn-cancel"
                >
                  {{ 'ManualStep4.Cancel' | translate }}
                </a>
                <button
                  class="btn btn-primary btn-sm btn-submit"
                  [disabled]="importListTemp.length === 0"
                  (click)="submitSelected()"
                >
                  {{ 'ManualStep4.Submit' | translate }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <fan-id-modal-wrapper
    *ngIf="show_cancel_modal"
    [title]="'Common.Alert' | translate"
    (closeThis)="show_cancel_modal = false"
  >
    <div class="cancel-modal-body">
      <p>{{ 'Common.AreYouSureCancelProcess' | translate }}</p>
      <p>{{ 'Common.AllChangesDoneLost' | translate }}</p>
      <button type="button" class="btn btn-primary btn-caret-8" (click)="cancel()">
        {{ 'Common.YesProceed' | translate }}
      </button>
    </div>
  </fan-id-modal-wrapper>
</div>
<fan-id-processing
  *ngIf="processing"
  [data]="processingdata"
></fan-id-processing>
<fan-id-submission-status
  *ngIf="submittedStatus"
  [status]="subStatus"
  (closeThis)="close($event)"
>
</fan-id-submission-status>

<fan-id-common-error-modal
*ngIf="submittedError"
head_error_message='RegisterError.SubmissionFailed'
[error_message]="submittedError"
(closeThis)="closeSubmitError()">
</fan-id-common-error-modal>
