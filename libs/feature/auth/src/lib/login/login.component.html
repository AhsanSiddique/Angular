<div *ngIf="!disableOtp">
  <form class="mt-3" [formGroup]="loginForm" (ngSubmit)="proceedToOtp()">
    <!--  -->
    <div class="Qatar2022 mb-3">
      <h2 style="color: var(--hayya-primary); font-weight: 600">Login</h2>
    </div>
    <div class="form-group" *ngIf="isServiceCenter">
      <ng-select
        [virtualScroll]="false"
        [clearable]="false"
        bindLabel="name"
        bindValue="id"
        placeholder="{{ 'Login.TerminalPlaceholder' | translate }}"
        formControlName="terminal"
        class="form-control terminal-select"
        aria-describedby="terminal"
        required
        (change)="changeTerminal()"
        [ngClass]="{
          'is-invalid':
            loginForm.get('terminal').touched &&
            loginForm.get('terminal').invalid
        }"
      >
        <ng-template ng-header-tmp>
          <div class="drop-header">
            <span>{{ 'Login.Code' | translate }}</span>
            <span>{{ 'Login.TerminalName' | translate }}</span>
          </div>
        </ng-template>
        <ng-option *ngFor="let list of terminalList" [value]="list.id">
          <div class="drop-header">
            <span>{{ list.code }}</span>
            <span>{{ list.name }}</span>
          </div>
        </ng-option>
      </ng-select>
      <div
        class="invalid-feedback"
        *ngIf="loginForm.get('terminal').errors?.required"
      >
        {{ 'Login.TerminalPlaceholder' | translate }}
      </div>
    </div>
    <div class="form-group" *ngIf="isServiceCenter && showPrinter">
      <ng-select
        [virtualScroll]="false"
        [clearable]="false"
        bindLabel="name"
        bindValue="id"
        placeholder="{{ 'Login.PrinterPlaceholder' | translate }}"
        formControlName="printer"
        class="form-control"
        aria-describedby="printer"
        required
        [ngClass]="{
          'is-invalid':
            loginForm.get('printer').touched && loginForm.get('printer').invalid
        }"
      >
        <ng-template ng-header-tmp>
          <div class="drop-printer">
            <span>{{ 'Login.PrinterId' | translate }}</span>
            <span>{{ 'Login.PrinterName' | translate }}</span>
          </div>
        </ng-template>
        <ng-option *ngFor="let list of printerList" [value]="list.printer_Id">
          <div class="drop-printer">
            <span>{{ list.printer_Id }}</span>
            <span>{{ list.printer_Name }}</span>
          </div>
        </ng-option>
      </ng-select>
      <div
        class="invalid-feedback"
        *ngIf="loginForm.get('printer').errors?.required"
      >
        {{ 'Login.PrinterPlaceholder' | translate }}
      </div>
    </div>
    <div class="form-group">
      <label class="Graphik" for="username">{{
        'Login.Username' | translate
      }}</label>
      <input
        type="text"
        class="form-control"
        id="username"
        formControlName="username"
        aria-describedby="username"
        placeholder="{{ 'Login.UsernamePlaceholder' | translate }}"
        [ngClass]="{
          'is-invalid':
            loginForm.get('username').touched &&
            loginForm.get('username').invalid
        }"
        required
      />
      <div
        class="invalid-feedback"
        *ngIf="loginForm.get('username').errors?.required"
      >
        {{ 'Login.UsernamePlaceholder' | translate }}
      </div>
    </div>
    <div class="form-group">
      <label for="password">{{ 'Login.Password' | translate }}</label>
      <div class="input-password" data-tooltip="atleast 8 charecter">
        <input
          [type]="passvisibility ? 'text' : 'password'"
          data-popover="right"
          class="form-control pwVisibility"
          formControlName="password"
          fanIdBlockCopyPaste
          [ngClass]="{
            'is-invalid':
              loginForm.get('password').touched &&
              loginForm.get('password').invalid,
            hasValue: this.loginForm.get('password').value
          }"
          id="inputPasswordNew"
          required=""
          placeholder="{{ 'Login.PasswordPlaceholder' | translate }}"
        />
        <div
          class="invalid-feedback"
          *ngIf="loginForm.get('password').errors?.required"
        >
          {{ 'Login.PasswordPlaceholder' | translate }}
        </div>
        <div
          class="input-password-append"
          *ngIf="this.loginForm.get('password').value"
          (click)="passvisibility = !passvisibility"
        >
          <div class="input-password-text">
            <span *ngIf="passvisibility">
              <svg width="19.297" height="13.436" viewBox="0 0 19.297 13.436">
                <g id="noun_Eye_1542295" transform="translate(-2.218 -6.159)">
                  <path
                    id="Path_3057"
                    data-name="Path 3057"
                    d="M21.214,11.91C16.742,5.9,12.092,6.149,11.867,6.165,11.64,6.149,6.99,5.9,2.519,11.91a1.856,1.856,0,0,0-.3.967h0a1.843,1.843,0,0,0,.3.966c4.471,6.008,9.121,5.761,9.348,5.745.225.016,4.875.263,9.348-5.745a1.839,1.839,0,0,0,.3-.966h0A1.845,1.845,0,0,0,21.214,11.91ZM11.867,17.5a4.424,4.424,0,0,1-4.194-4.62,4.423,4.423,0,0,1,4.194-4.62,4.421,4.421,0,0,1,4.193,4.62A4.422,4.422,0,0,1,11.867,17.5Zm1.9-4.95a1.686,1.686,0,0,1-1.6-1.761,1.887,1.887,0,0,1,.18-.793,2.5,2.5,0,0,0-.479-.05A2.808,2.808,0,0,0,9.2,12.877a2.808,2.808,0,0,0,2.662,2.933,2.808,2.808,0,0,0,2.662-2.933,3.066,3.066,0,0,0-.046-.527A1.467,1.467,0,0,1,13.764,12.548Z"
                    transform="translate(0 0)"
                    fill="#999fa8"
                  />
                </g>
              </svg>
            </span>
            <span *ngIf="!passvisibility">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="19.293"
                height="17.242"
                viewBox="0 0 19.293 17.242"
              >
                <g
                  id="Group_5711"
                  data-name="Group 5711"
                  transform="translate(-1495.186 -591.662)"
                >
                  <path
                    id="Subtraction_1"
                    data-name="Subtraction 1"
                    d="M22409.693,6360.68a8.5,8.5,0,0,1-3.416-.841,15.138,15.138,0,0,1-5.742-4.9s0,0,0-.01l0-.006a1.7,1.7,0,0,1,0-1.915.046.046,0,0,0,.008-.014,17.228,17.228,0,0,1,3.492-3.568l2.223,2.223a4.972,4.972,0,0,0-.564,2.316,4.425,4.425,0,0,0,4.191,4.62,3.911,3.911,0,0,0,2.443-.864l1.8,1.8a8.885,8.885,0,0,1-4.062,1.159c-.1,0-.16,0-.182,0h-.01C22409.848,6360.676,22409.787,6360.68,22409.693,6360.68Zm7.219-3.16h0l-2.883-2.883a5.2,5.2,0,0,0,.045-.674,4.428,4.428,0,0,0-4.2-4.619,3.846,3.846,0,0,0-1.006.134l-1.738-1.74a7.938,7.938,0,0,1,2.557-.493c.121,0,.186.005.188.005s.066-.005.188-.005a8.5,8.5,0,0,1,3.42.841,15.123,15.123,0,0,1,5.74,4.9s0,0,0,.01l0,.006a1.7,1.7,0,0,1,0,1.905l-.006.012-.006.01a18.537,18.537,0,0,1-2.312,2.587Zm-7.035-.626a2.81,2.81,0,0,1-2.662-2.932,3.183,3.183,0,0,1,.209-1.141l3.719,3.719A2.43,2.43,0,0,1,22409.877,6356.893Z"
                    transform="translate(-20905.047 -5753.46)"
                    fill="#999fa8"
                  />
                  <rect
                    id="Rectangle_2789"
                    data-name="Rectangle 2789"
                    width="2.384"
                    height="22"
                    rx="1.192"
                    transform="translate(1495.893 593.348) rotate(-45)"
                    fill="#999fa8"
                  />
                </g>
              </svg>
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="space-between mb-2">
      <div class="form-check pl-0">
        <div class="roundcheck">
          <!-- <input
            type="checkbox"
            id="rememberMe"
            [(ngModel)]="remember_me_checked"
            [ngModelOptions]="{ standalone: true }"
          />
          <label for="rememberMe"></label>
          <span class="roundcheckLabel">{{
            'Login.Remember' | translate
          }}</span> -->
        </div>
      </div>
      <div class="form-anchor">
        <a routerLink="/auth/forget-password">{{
          'Login.ForgotPassword' | translate
        }}</a>
      </div>
    </div>
    <div class="login-validation" *ngIf="showError !== ''">
      <span>{{ showError }} </span>
    </div>

    <button
      type="submit"
      class="btn btn-primary btn-grid block"
      [disabled]="this.loginForm.invalid"
    >
      <span>{{ 'Login.Login' | translate }}</span>
    </button>
  </form>
</div>
<div *ngIf="disableOtp">
  <form class="mt-3" [formGroup]="otpForm" (ngSubmit)="login()">
    <div class="otp-div Qatar2022 mb-3">
      <h2 style="color: var(--hayya-primary); font-weight: 600">Login OTP Verification</h2>
      <span style="font-size: 12px"
        >We have sent you a One Time Password (OTP) to your Email Address</span
      >
    </div>
    <div class="form-group mb-1">
      <div
        style="
          display: flex;
          flex-direction: row;
          justify-content: space-between;
        "
      >
        <label for="email">Enter the OTP</label>
        <span class="timer">{{ timer }}</span>
      </div>
      <div>
        <input
          type="text"
          pattern="\d*"
          class="form-control"
          formControlName="otp"
          required
          maxlength="6"
          autocomplete="new-password"
          placeholder="Please enter the OTP"
          [ngClass]="{
            'is-invalid':
              otpForm.get('otp').touched && otpForm.get('otp').invalid
          }"
          required
        />
        <!--  && resetForm.get('email').invalid -->
        <div
          class="invalid-feedback"
          *ngIf="otpForm.get('otp').errors?.required"
        >
          {{ 'ForgetPassword.EnterOtp' | translate }}
        </div>
        <div
          class="invalid-feedback"
          *ngIf="otpForm.get('otp').errors?.invalid"
        >
          Only numbers are allowed in OTP
        </div>
      </div>
      <div class="space-between">
        <div class="form-anchor">
          <a class="purple" style="cursor: pointer" (click)="editEmail()">
            Edit Login Credentials
          </a>
        </div>
        <div class="form-anchor">
          <a
            class="purple"
            style="cursor: pointer"
            (click)="resendOtp()"
            [ngClass]="{
              disabled: counter > 0 || resendOtpcounter >= resendLimit || submitOtpCounter >= submitLimit
            }"
            >{{ 'ForgetPassword.ResendOtp' | translate }}</a
          >
        </div>
      </div>
    </div>
    <div class="login-validation" *ngIf="showError != ''">
      <span>{{ showError }} </span>
    </div>
    <!-- <div class="sent-email-validation" *ngIf="showMessage"><span>{{message}}</span></div> -->

    <div class="footer-area mt-4 mb-3">
      <button
        type="submit"
        class="btn btn-primary btn-sm btn-submit col-12"
        [disabled]="
          this.otpForm.invalid || this.submitOtpCounter >= this.submitLimit
        "
      >
        Submit
      </button>

      <button
        class="btn btn-secondary col-12 mt-3 mr-2"
        (click)="cancelOtp()"
      >
        <span>Cancel</span>
      </button>
    </div>
  </form>
</div>
